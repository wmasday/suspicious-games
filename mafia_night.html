<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waiting Room</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container mafia_room">
        <div class="card-mafia bg-card-4">
            <div class="content-mafia">
                <div class="header-player">
                    <div class="cuaca">
                        <h4>Fase : </h4>
                        <span><i class="ph ph-moon-stars"></i> Malam</span>
                    </div>
                    <div class="role">
                        <h4>Role Kamu</h4>
                        <span>Mafia</span>
                    </div>
                    <div class="timer">
                        <h4>Timer</h4>
                        <span>60 s</span>
                    </div>
                </div>
                <div class="list-player">
                    <h3>Players : </h3>
                    <div id="players-list"></div>
                    <h3>Mafia : </h3>
                    <div id="mafia-list"></div>
                </div>
                <div class="action-player">
                    <div class="field-talk">
                        <input type="text" id="chatInput" readonly placeholder="Let's Talk">
                    </div>
                    <div class="btn-vote">
                        <button>Vote <i class="ph ph-target"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-vote" id="voteModal">
            <div class="modal-dialog">
                <div class="header-modal-vote">
                    <h3 class="vote-title">Vote for Mafia</h3>
                    <button class="close-vote-modal">⨉</button>
                </div>
                <div class="vote-body">
                    <!-- Player list with checkboxes for voting -->
                    <form id="voteForm">
                        <!-- Example of a player checkbox -->
                        <div class="player-checkbox">
                            <input type="checkbox" id="player1" name="vote" value="Budi">
                            <label for="player1">Budi</label>
                        </div>
                        <!-- More players will be added dynamically -->
                    </form>
                </div>
                <div class="vote-actions">
                    <button class="submit-vote">Submit Vote</button>
                </div>
            </div>
        </div>
        
        <div class="modal-chat" id="joinRoomModal">
            <div class="modal-dialog">
                <div class="header-modal-chat">
                    <h3 class="timer-chat">
                        Timer <span>60 s</span>
                    </h3>
                    <button class="close-modal">⨉</button>
                </div>
                <div class="chat-body">
                    <!-- Bubble Chat Example -->
                    <div class="bubble-chat">
                        <p><strong>Budi:</strong> Hello, are you the mafia?</p>
                    </div>
                    <div class="bubble-chat user-bubble">
                        <p><strong>You:</strong> Yes, I am!</p>
                    </div>
                </div>
                <div class="input-chat">
                    <input type="text" placeholder="Let's Talk" />
                    <button>Send</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script>
        // Get modal and elements
        const chatInput = document.getElementById('chatInput');
        const modalChat = document.getElementById('joinRoomModal');
        const closeButton = document.querySelector('.close-modal');
        const voteButton = document.querySelector('.btn-vote button');
        const voteModal = document.getElementById('voteModal');
        const closeVoteButton = document.querySelector('.close-vote-modal');
        const voteForm = document.getElementById('voteForm');

        // Function to open the vote modal
        voteButton.addEventListener('click', () => {
            // Dynamically populate the player list in the vote modal
            voteForm.innerHTML = ''; // Clear existing list
            players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.classList.add('player-checkbox');

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `player${index}`;
                checkbox.name = 'vote';
                checkbox.value = player.name;

                const label = document.createElement('label');
                label.htmlFor = `player${index}`;
                label.textContent = player.name;

                playerDiv.appendChild(checkbox);
                playerDiv.appendChild(label);
                voteForm.appendChild(playerDiv);
            });

            voteModal.style.display = 'flex'; // Show the modal as a flexbox
        });

        // Function to close the vote modal
        closeVoteButton.addEventListener('click', () => {
            voteModal.style.display = 'none';
        });

        // Close the modal if clicked outside the modal content
        window.addEventListener('click', (e) => {
            if (e.target === voteModal) {
                voteModal.style.display = 'none';
            }
        });

        // Function to open the modal
        chatInput.addEventListener('click', () => {
            modalChat.style.display = 'flex'; // Show the modal as a flexbox
        });

        // Function to close the modal
        closeButton.addEventListener('click', () => {
            modalChat.style.display = 'none';
        });

        // Close the modal if clicked outside the modal content
        window.addEventListener('click', (e) => {
            if (e.target === modalChat) {
                modalChat.style.display = 'none';
            }
        });

    </script>
    <script type="text/javascript">
        const players = [
            {
                img: './public/assets/Profile.png',
                name: "Budi",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Asep",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Udin",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Jamal",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Nulur",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Rina",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Nabila",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Hendra",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Joko",
                username: 'belligerent_mantis_17',
            },
        ];

        const mafias = [
            {
                img: './public/assets/Profile.png',
                name: "Nabila ( You )",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Hendra",
                username: 'belligerent_mantis_17',
            },
            {
                img: './public/assets/Profile.png',
                name: "Joko",
                username: 'belligerent_mantis_17',
            },
        ]

        const playersList = document.getElementById('players-list');
        const mafiaList = document.getElementById('mafia-list');


        players.forEach(player => {
            const playerDiv = document.createElement('div');
            playerDiv.classList.add('players');
            
            const playerImage = document.createElement('img');
            playerImage.src = player.img; // Use player image
            
            const playerInfo = document.createElement('div');
            playerInfo.classList.add('player-info');

            const playerName = document.createElement('h4');
            playerName.textContent = player.name + (player.username.includes('(You)') ? ' (You)' : '');

            const playerUsername = document.createElement('p');
            playerUsername.textContent = player.username;

            playerInfo.appendChild(playerName);
            playerInfo.appendChild(playerUsername);

            playerDiv.appendChild(playerImage);
            playerDiv.appendChild(playerInfo);
            playersList.appendChild(playerDiv);
        })

        mafias.forEach(mafia => {
            const mafiaDiv = document.createElement('div');
            mafiaDiv.classList.add('mafias');
            
            const mafiaImage = document.createElement('img');
            mafiaImage.src = mafia.img; // Use mafia image
            
            const mafiaInfo = document.createElement('div');
            mafiaInfo.classList.add('mafia-info');

            const mafiaName = document.createElement('h4');
            mafiaName.textContent = mafia.name + (mafia.username.includes('(You)') ? ' (You)' : '');

            const mafiaUsername = document.createElement('p');
            mafiaUsername.textContent = mafia.username;

            mafiaInfo.appendChild(mafiaName);
            mafiaInfo.appendChild(mafiaUsername);

            mafiaDiv.appendChild(mafiaImage);
            mafiaDiv.appendChild(mafiaInfo);
            mafiaList.appendChild(mafiaDiv);
        })
    </script>
</body>

</html>
